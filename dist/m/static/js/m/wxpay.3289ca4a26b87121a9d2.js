webpackJsonp([7,0],{0:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var i=n(2),a=o(i),r=n(230),c=o(r);n(4),n(1),new a.default({el:"#wxpay",template:"<App/>",components:{App:c.default}})},1:function(e,t){},4:function(e,t,n){"use strict";!function(){var e=document.documentElement.clientWidth||document.body.clientWidth;e=e>640?640:e;var t=e/750*100;document.documentElement.style.fontSize=t+"px"}(),window.VERSION="0.1",window.HOST="http://api.kofuf.com";var o=n(19);o.attach(document.body),window.getAuthLink=function(e,t){return"https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx05e842991e5fa0b2&redirect_uri="+HOST+"%2Fapi%2Fsession%2Fauth_weixin&response_type=code&scope=snsapi_userinfo&state="+e+"_"+t+"#wechat_redirect"},window.getAuth=function(e,t,n,o){var i=e.get("gid"),a=t.parse();localStorage.getItem("gid")||("undefined"!=typeof a.gid?(localStorage.setItem("gid",a.gid),localStorage.setItem("token",a.token)):"undefined"!=typeof i?(localStorage.setItem("gid",e.get("gid")),localStorage.setItem("token",e.get("token"))):window.location.href=getAuthLink(n,o))},window.clearcookie=function(e){localStorage.clear(),e.set("gid",0,{domain:".kofuf.com",path:"/",expires:-1}),e.set("token",0,{domain:".kofuf.com",path:"/",expires:-1})}},5:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={ajaxPost:function(e,t,n,o){$.ajax({url:e,type:"POST",data:t,success:function(e){n(e)},error:function(e){o(e)}})},ajaxGet:function(){},httpPost:function(e,t,n,o,i){e.http.options.emulateJSON=!0,e.http.options.headers={"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},e.http.interceptors.push(function(e,t){e.headers.set("from","3"),e.headers.set("gid",localStorage.getItem("gid")),e.headers.set("token",localStorage.getItem("token")),e.headers.set("version",VERSION),t()}),e.http.post(t,n).then(function(e){return e.bodyText}).then(function(e){var e=JSON.parse(e);o(e)},function(e){i(e)})},httpGet:function(e,t,n,o,i){e.http.options.emulateJSON=!0,e.http.options.headers={"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},e.http.interceptors.push(function(e,t){e.headers.set("from","3"),e.headers.set("gid",localStorage.getItem("gid")),e.headers.set("token",localStorage.getItem("token")),e.headers.set("version",VERSION),t()}),e.http.get(t,n).then(function(e){return e.bodyText}).then(function(e){var e=JSON.parse(e);o(e)},function(e){i(e)})}}},23:function(e,t){},57:function(e,t){"use strict";function n(e,t,n){console.log("发起微信支付"),"undefined"==typeof WeixinJSBridge?(document.addEventListener?document.addEventListener("WeixinJSBridgeReady",o,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",o),document.attachEvent("onWeixinJSBridgeReady",o)),n.$vux.alert.show({title:"提示",content:"请在微信中打开",dialogTransition:"",maskTransition:"",onShow:function(){},onHide:function(){}}),n.disable=!0):o(e,t,n)}function o(e,t,n){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.app_id,timeStamp:e.timestamp,nonceStr:e.nonce_str,package:"prepay_id="+e.prepay_id,signType:"MD5",paySign:e.sign},function(o){console.log(o),"get_brand_wcpay_request:ok"==o.err_msg?t(e):(alert("支付取消"),n.disable=!0)})}Object.defineProperty(t,"__esModule",{value:!0}),t.toPay=n},122:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),a=o(i),r=n(57),c=n(2),d=o(c),s=n(7),u=o(s),f=n(137),p=o(f);d.default.use(p.default),d.default.use(u.default),t.default={name:"wxpay",data:function(){return{orderInfo:""}},components:{},created:function(){},methods:{createOrder:function(){var e=this;localStorage.getItem("gid")&&a.default.httpPost(d.default,HOST+"/pay/weixin/create_order",{type:"JSAPI",items:"300"},function(t){console.log("订单创建成功"),e.orderInfo=t,(0,r.toPay)(t)},function(e){console.log(e),console.log("订单创建失败")})}}}},180:function(e,t){},201:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"wxpay"}},[n("div",{staticClass:"sub",on:{click:e.createOrder}},[e._v("李大霄 订阅：1"),n("span",[e._v("¥／年")]),e._v(" id:300")])])},staticRenderFns:[]}},230:function(e,t,n){var o,i;n(180),o=n(122);var a=n(201);i=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(i=o=o.default),"function"==typeof i&&(i=i.options),i.render=a.render,i.staticRenderFns=a.staticRenderFns,e.exports=o}});